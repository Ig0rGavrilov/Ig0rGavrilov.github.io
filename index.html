<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kolosalon</title>
  </head>
  <body>
    <h1>Kolosalon</h1>

    <form id="orderForm">
      <h2>Vyber Kola</h2>

      <label>
        <input type="checkbox" name="bikeType" value="horske" />
        Horské (500 Kč/den)
        <input type="number" name="horskeQuantity" min="0" />
      </label>
      <br />

      <label>
        <input type="checkbox" name="bikeType" value="detske" />
        Dětské (200 Kč/den)
        <input type="number" name="detskeQuantity" min="0" />
      </label>
      <br />

      <label>
        <input type="checkbox" name="bikeType" value="silnicni" />
        Silniční (1 500 Kč/den)
        <input type="number" name="silnicniQuantity" min="0" />
      </label>
      <br />

      <label>
        <input type="checkbox" name="bikeType" value="gravel" />
        Gravel (2 500 Kč/den)
        <input type="number" name="gravelQuantity" min="0" />
      </label>
      <br />

      <h2>Pocet Dni:</h2>

      <select name="rentalDuration">
        <option value="5">5 dnů</option>
        <option value="7">Týden</option>
        <option value="14">14 dní</option>
        <option value="30">Měsíc</option>
      </select>
      <br />

      <h2>Nosic:</h2>

      <label>
        <input type="radio" name="bikeCarrier" value="strešní" />
        Cyklonosič střešní (+5%)
      </label>
      <br />

      <label>
        <input type="radio" name="bikeCarrier" value="tazne" />
        Cyklonosič na tažné zařízení (+10%)
      </label>
      <br />

      <label>
        <input type="radio" name="bikeCarrier" value="neni" />
        Není třeba cyklonosič
      </label>
      <br />

      <h3>Celkem</h3>
      <div id="celkem"></div>
      <h3>Vlozte castku</h3>
      <input type="number" min="0" id="wantToPay" name="wantToPay" />
      <input type="submit" value="Submit Order" />
      <h3>Vešel</h3>
      <div id="vesel"></div>
      <h3>e-mail</h3>
      <input type="email" id="email" name="contactEmail" />
      <br />

      <input type="submit" value="Submit email" />
    </form>

    <script>
      document
        .getElementById("orderForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const formData = new FormData(event.target);

          const selectedBikeTypes = [];
          formData.getAll("bikeType").forEach((bikeType) => {
            if (bikeType !== "") selectedBikeTypes.push(bikeType);
          });

          const rentalDuration = formData.get("rentalDuration");

          const bikeCarrier = formData.get("bikeCarrier");

          let totalPrice = 0;
          selectedBikeTypes.forEach((bikeType) => {
            const quantity = formData.get(bikeType + "Quantity");
            if (quantity !== "") {
              switch (bikeType) {
                case "horske":
                  totalPrice += 500 * parseInt(quantity) * rentalDuration;
                  break;
                case "detske":
                  totalPrice += 200 * parseInt(quantity) * rentalDuration;
                  break;
                case "silnicni":
                  totalPrice += 1500 * parseInt(quantity) * rentalDuration;
                  break;
                case "gravel":
                  totalPrice += 2500 * parseInt(quantity) * rentalDuration;
                  break;
              }
            }
          });

          if (bikeCarrier === "strešní") {
            totalPrice *= 1.05;
          } else if (bikeCarrier === "tazne") {
            totalPrice *= 1.1;
          }

          document.getElementById("celkem").textContent = totalPrice;

          const wantToPay = document.getElementById("wantToPay");

          console.log(wantToPay.value);

          if (parseInt(wantToPay.value) >= totalPrice) {
            document.getElementById("vesel").textContent = "YES";
          } else {
            document.getElementById("vesel").textContent = "NO";
          }
        });
    </script>
    <script>
      function checkEmail() {
        const contactEmail = document.getElementById("email");

        if (!contactEmail.includes("@")) {
          return alert("invalid email");
        }
      }
    </script>
  </body>
</html>
